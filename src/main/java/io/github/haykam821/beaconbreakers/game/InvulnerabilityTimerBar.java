package io.github.haykam821.beaconbreakers.game;

import io.github.haykam821.beaconbreakers.game.phase.BeaconBreakersActivePhase;
import net.minecraft.entity.boss.BossBar;
import net.minecraft.text.Text;
import xyz.nucleoid.plasmid.api.game.common.GlobalWidgets;
import xyz.nucleoid.plasmid.api.game.common.widget.BossBarWidget;

public class InvulnerabilityTimerBar {
	private static final Text TITLE = Text.translatable("text.beaconbreakers.invulnerability.title");
	private static final BossBar.Style STYLE = BossBar.Style.PROGRESS;

	private final BeaconBreakersActivePhase phase;
	private final BossBarWidget widget;

	public InvulnerabilityTimerBar(BeaconBreakersActivePhase phase, GlobalWidgets widgets) {
		this.phase = phase;
		this.widget = widgets.addBossBar(TITLE, BossBar.Color.YELLOW, STYLE);
	}

	public void tick() {
		this.widget.setProgress(this.phase.getInvulnerability() / (float) this.phase.getConfig().getInvulnerability());
	}

	public void remove() {
		this.widget.close();
	}
} 